---
steps:
  - bash: |
      NPM_CACHE_DIR=$(npm config get cache)
      echo "##vso[task.setvariable variable=NPM_CACHE_DIR]$NPM_CACHE_DIR"
    displayName: Compute pipeline variable - NPM_CACHE_DIR 
  - task: Cache@2
    inputs:
      key: 'npm | "$(Build.SourcesDirectory)/package-lock.json"'
      restoreKeys: |
         npm
      path: $(NPM_CACHE_DIR)
    displayName: Cache NPM
